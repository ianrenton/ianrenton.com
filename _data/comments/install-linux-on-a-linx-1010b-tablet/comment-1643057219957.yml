_id: c680c4f0-7d56-11ec-9cc8-3515bcde6e56
_parent: 'https://ianrenton.com/guides/install-linux-on-a-linx-1010b-tablet/'
name: Damien
email: ''
message: "grub-install $disk <- won't work, as the variable was defined outside the chroot.\r\n\r\nLuckily, the effect of the variable being empty should be that grub-install fails to run.\r\n\r\nIt's a pity, 'cos it's more readable with everything defined at the top. All is not lost though :)\r\n\r\nSome options.\r\n1. Move :disk=/dev/mmkblk1 inside the chroot block,\r\n2. Just do it static with a second big fat warning.\r\n3. Rob the workaround below.\r\n\r\nTo see what I mean:-\r\n\r\n    disk=\"Hello\"\r\n    echo $disk # returns Hello\r\n    \r\n    chroot /\r\n    export PS1=\"(chroot) $PS1\"\r\n    echo $disk # Will return nothing\r\n    exit\r\n\r\n    echo $disk # Have exited back out of chroot\r\n    # so should yield Hello\r\n\r\n    #A possible UGLY workaround\r\n    #we pass the variable in to the chroot:\r\n    #one gotcha.. the path to 'env' inside the chroot needs to be known, but it's /usr/bin/env in just about every distro now.\r\n\r\n    chroot / /usr/bin/env disk=\"$disk\" /bin/bash\r\n    export PS1=\"(chroot) $PS1\"\r\n    echo $disk # works.\r\n    exit"
date: '2022-01-24T20:46:59.955Z'
